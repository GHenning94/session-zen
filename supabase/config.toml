project_id = "ykwszazxigjivjkagjmf"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[auth]
enabled = true
site_url = "https://ykwszazxigjivjkagjmf.lovable.app"
additional_redirect_urls = ["http://localhost:5173/**", "https://ykwszazxigjivjkagjmf.lovable.app/**"]
jwt_expiry = 3600
# enable_confirmations = true  <-- Linha removida

[db]
port = 54322

[functions.create-checkout]
verify_jwt = true
[functions.check-subscription]
verify_jwt = true
[functions.get-payment-methods]
verify_jwt = true
[functions.create-setup-intent]
verify_jwt = true
[functions.update-default-payment-method]
verify_jwt = true
[functions.delete-payment-method]
verify_jwt = true
[functions.test-upgrade]
verify_jwt = true
[functions.stripe-webhook]
verify_jwt = false
[functions.generate-registration-token]
verify_jwt = true
[functions.register-client-via-token]
verify_jwt = false
[functions.validate-registration-token]
verify_jwt = false

[functions.2fa-setup-email]
verify_jwt = true
[functions.2fa-setup-authenticator]
verify_jwt = true
[functions.2fa-generate-backup-codes]
verify_jwt = true
[functions.2fa-send-email-code]
verify_jwt = true 
[functions.2fa-verify-code]
verify_jwt = true 
[functions.2fa-request-reset]
verify_jwt = false

[functions.get-subscription-invoices]
verify_jwt = true
[functions.get-subscription-details]
verify_jwt = true
[functions.check-email-exists]
verify_jwt = false
[functions.request-password-reset]
verify_jwt = false

[functions.request-email-confirmation]
verify_jwt = false

# --- CORREÇÃO FINAL APLICADA AQUI ---
[functions.confirm-email-strict]
verify_jwt = false

[functions.resend-confirmation-email]
verify_jwt = false
[functions.send-security-notification]
verify_jwt = false
[functions.delete-user-account]
verify_jwt = true

[functions.request-email-change]
verify_jwt = true
[functions.resend-email-change]
verify_jwt = false
[functions.confirm-email-change]
verify_jwt = false

[functions.encrypt-data]
verify_jwt = true

[functions.migrate-to-encrypted]
verify_jwt = true

[functions.admin-login]
verify_jwt = false

[functions.admin-verify-session]
verify_jwt = false

[functions.admin-get-users]
verify_jwt = false

[functions.admin-security-audit]
verify_jwt = false

[functions.admin-get-payments]
verify_jwt = false

[functions.admin-get-analytics]
verify_jwt = false

[functions.admin-get-content]
verify_jwt = false

[functions.admin-get-logs]
verify_jwt = false

[functions.admin-update-user]
verify_jwt = false

[functions.admin-system-config]
verify_jwt = false

[functions.admin-get-notifications]
verify_jwt = false

[functions.admin-mark-notification-read]
verify_jwt = false

[functions.admin-get-dashboard-stats]
verify_jwt = false

[functions.cancel-subscription]
verify_jwt = true

[functions.send-downgrade-email]
verify_jwt = false

[functions.send-upgrade-email]
verify_jwt = false

[functions.get-subscription-status]
verify_jwt = true

[edge_runtime]
enabled = true