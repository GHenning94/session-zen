project_id = "ykwszazxigjivjkagjmf"

[api]
enabled = true
port = 54321
schemas = ["public", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[auth]
enabled = true
site_url = "http://localhost:5173"
additional_redirect_urls = ["http://localhost:5173/**"]
jwt_expiry = 3600

[db]
port = 54322

[functions.create-checkout]
verify_jwt = true

[functions.check-subscription]
verify_jwt = true

[functions.get-payment-methods]
verify_jwt = true

[functions.create-setup-intent]
verify_jwt = true

[functions.update-default-payment-method]
verify_jwt = true

[functions.delete-payment-method]
verify_jwt = true

[functions.test-upgrade]
verify_jwt = true

[functions.stripe-webhook]
verify_jwt = false

[functions.generate-registration-token]
verify_jwt = true

[functions.register-client-via-token]
verify_jwt = false

[functions.validate-registration-token]
verify_jwt = false

[functions.2fa-setup-email]
verify_jwt = true

[functions.2fa-setup-authenticator]
verify_jwt = true

[functions.2fa-generate-backup-codes]
verify_jwt = true

# --- CORREÇÃO DE SEGURANÇA ABAIXO ---
# Essas funções agora são chamadas por um usuário logado
# e DEVEM verificar o token.

[functions.2fa-send-email-code]
verify_jwt = true # <-- MUDADO DE 'false'

[functions.2fa-verify-code]
verify_jwt = true # <-- MUDADO DE 'false'

[functions.2fa-request-reset]
verify_jwt = false
# --- FIM DA CORREREÇÃO ---

[edge_runtime]
enabled = true